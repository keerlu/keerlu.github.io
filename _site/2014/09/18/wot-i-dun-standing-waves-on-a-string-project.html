<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/solarized-light.css">
<!--  <link href="http://thomasf.github.io/solarized-css/solarized-light.min.css" rel="stylesheet"></link>-->
  <link rel="canonical" href="https://localhost/4000https://localhost/4000">
  <link rel="alternate" type="application/rss+xml" title="Stuff Wot I Dun" href="https://localhost/4000/feed.xml" />

</head>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?...">
</script>



  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Stuff Wot I Dun</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

   <header class="post-header">

   <h2> Wot I dun: standing waves on a string project </h2>
   <p class="post-meta">Sep 18, 2014 </p>
<!--   <p class="post-meta">Sep 18, 2014 • {"login"=>"wotidun", "email"=>"wotidunread@gmail.com", "display_name"=>"wotidun", "first_name"=>"", "last_name"=>""} • {"_wpas_skip_google_plus"=>"1", "_wpas_skip_facebook"=>"1", "_wpcom_is_markdown"=>"1", "_wpas_skip_tumblr"=>"1", "_wpas_skip_path"=>"1", "_wpas_skip_linkedin"=>"1", "_wpas_skip_twitter"=>"1", "_edit_last"=>"67112767", "geo_public"=>"0", "_publicize_pending"=>"1"}</p>-->
<!--  </header>-->

  <article class="post-content">
    <h2>Wot I'm doing</h2>
<p>I was originally inspired to try Pygame for physics visualisations by <a href="http://petercollingridge.co.uk/pygame-physics-simulation">Peter Collingridge's excellent physics tutorials</a> which I worked through a while ago to start getting the idea of Python. I'm not too sure it's the best tool for producing the kind of thing I want (I will definitely be considering redoing this particular project as an interactive web visualisation in d3.js), but it's been good for learning the language.</p>
<p>My original idea for a Pygame project was to produce some demonstrations relating to <a href="http://en.wikipedia.org/wiki/Weak_measurement">weak measurements in quantum mechanics,</a> a subject I'm currently trying to learn more about. Despite the rather dry and factual name, the theory of weak measurement has led to all kinds of strange experiments that are bizarre even by quantum standards (e.g. the recent <a href="http://www.bbc.co.uk/news/science-environment-28543990">Quantum Cheshire Cat experiment</a>). In particular, I wanted to create my own version of the model in <a href="mafija.fmf.uni-lj.si/seminar/files/2012_2013/Weak_koncni.pdf">this master's project paper</a>. I have a few notes on this, but mainly I just found myself going down the rabbit hole of trying to understand weak measurement and not doing much coding.</p>
<p>Then I needed to earn some more money and got a temp job for a couple of months, scanning and sorting post in a law firm, so I decided to give weak measurement a rest for a bit and pick a relatively straightforward project that I could work on half asleep in the library some evenings. After all, I wanted to be able to say I done <em>something</em> with my week other than scanning post. I still wanted something physics-y, so decided to make my own version of this nice <a href="http://www.phy.hk/wiki/englishhtm/StatWave.htm">Java applet</a> I'd come across demonstrating resonance on a string as the frequency of vibration changes.</p>
<p>The maths is in a pdf <a href="http://www.phy.hk/wiki/applets/StatWave/WaveOnRope.pdf">here</a> -- the main reason I picked this project is that I hadn't actually seen this exact problem solved before, with the oscillating boundary for the string. I started by just using Pygame to model the function given in the pdf (which is pretty terse) and will get round to deriving the maths for myself later.</p>
<h2>Contents:</h2>
<ul>
<li><a href="#18Aug">Monday 18th August:</a> Install pygame, run someone else's code to produce an animated sine function</li>
<li><a href="#19Aug">Tuesday 19th August:</a> Try and plot the function I wanted... slightly broken</li>
<li><a href="#21Aug">Thursday 21st August:</a> Fix the function </li>
<li><a href="#24Aug">Sunday 24th August:</a> Make the animation prettier: change colours and line thickness</li>
<li><a href="#26Aug">Tuesday 26th August:</a> Add basic keyboard interactivity</li>
<li><a href="#1Sep">Monday 1st and Tuesday 2nd September:</a> Play around with a GUI library</li>
<li><a href="#7Sep">Sunday 7th September:</a> Oh shit, the code is broken! Check that the maths is correct in Mathematica</li>
<li><a href="#8Sep">Monday 8th September:</a> Problem is something to do with integers and floats...</li>
<li><a href="#9Sep">Tuesday 9th September:</a> More confused than ever.</li>
<li><a href="#15Sep">Monday 15th September:</a> Something to do with the wrong parameter range?</li>
<li><a href="#17Sep">Wednesday 17th September:</a> Played around in Mathematica again... seems to be a parameter range problem</li>
<li><a href="#18Sep">Thursday 18th September:</a> Picked some parameter values that give a decent animation</li>
</ul>
<p><!--more--></p>
<p><a id="18Aug"></a></p>
<h2>Monday 18th August</h2>
<p>First I found a <a href="http://ericeastwood.com/blog/7/animated-sine-wave-two-ways-with-pygame-and-tkinter">pygame project</a> that just plots an animated sine wave running, so that I had something to build on. This took a while as I only had my netbook on me, which was missing pygame and some other stuff... but I got it working.</p>
<p>Then I mucked about for a while, trying to implement the function inside the sum in the equation for \( y \) <a href="http://www.phy.hk/wiki/applets/StatWave/WaveOnRope.pdf">here</a>. I don't care about damping so I set \( b=0 \), i.e. I tried to plot the function \( f(x, t) = \frac{k^2}{n}\frac{1}{k_n^2-k^2}\cos\omega t \) (I also relabelled \( z \) as \( x \) because I preferred that).</p>
<p>It didn't quite work, but that was enough for one evening.</p>
<p><a id="19Aug"></a></p>
<h2>Tuesday 19th August</h2>
<p>I found my silly errors from the previous day and got going. I ended up with this function definition for \( y(x,t) \):</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c"># Define standing wave function</span>

<span class="n">amplitude</span> <span class="o">=</span> <span class="mi">50</span> <span class="c"># in px</span>
<span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">canvas_width</span>

<span class="k">def</span> <span class="nf">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">frequency</span><span class="o">*</span><span class="p">(</span><span class="n">speed</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>

<span class="k">def</span> <span class="nf">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sum</span>

<span class="c"># some more irrelevant stuff...</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">canvas_width</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">canvas_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="n">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
    <span class="n">surface</span><span class="o">.</span><span class="n">set_at</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">color</span><span class="p">)</span></code></pre></figure>
<p>Seems to work nicely, as far as I can tell by just playing with different numbers for the frequency! Will be able to test it better once I've implemented some kind of interactive way to change the frequency... that is definitely a problem for another day when I'm less tired.</p>
<p>Then I remembered I need \( \psi\), not \( y\)... I started to add this, ending up with:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="c"># Some config width height settings</span>
<span class="n">canvas_width</span> <span class="o">=</span> <span class="mi">640</span>
<span class="n">canvas_height</span> <span class="o">=</span> <span class="mi">480</span>

<span class="c"># Just define some colors we can use</span>
<span class="n">color</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">background_color</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="c"># Set the window title</span>
<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">"Standing wave demonstration"</span><span class="p">)</span>

<span class="c"># Make a screen to see</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span>

<span class="c"># Make a surface to draw on</span>
<span class="n">surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span>

<span class="c"># Define standing wave function</span>

<span class="n">amplitude</span> <span class="o">=</span> <span class="mi">50</span> <span class="c"># in px</span>
<span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">canvas_width</span>

<span class="k">def</span> <span class="nf">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">frequency</span><span class="o">*</span><span class="p">(</span><span class="n">speed</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>

<span class="k">def</span> <span class="nf">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sum</span>

<span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">((</span><span class="mi">2</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span><span class="o">*</span><span class="n">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">))</span>

<span class="c"># y = int((canvas_height/2) + amplitude*math.sin(frequency*((float(x)/canvas_width)*(2*math.pi) + (speed*time.time()))))</span>

<span class="c"># Simple main loop</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># Redraw the background</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">canvas_width</span><span class="p">):</span>
<span class="n">psi</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">canvas_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">y</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="n">canvas_width</span><span class="p">))</span><span class="o">*</span><span class="n">amplitude</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="n">speed</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())))</span>
<span class="n">surface</span><span class="o">.</span><span class="n">set_at</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">psi</span><span class="p">),</span> <span class="n">color</span><span class="p">)</span>

<span class="c"># Put the surface we draw on, onto the screen</span>
<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">surface</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c"># Show it.</span>
<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">quit</span> <span class="p">()</span></code></pre></figure>

<p>This is definitely broken (the right end isn't fixed and should be), but I am tired and hungry so will leave it there for now.</p>
<p><a id="21Aug"></a></p>
<h2>Thursday 21st August</h2>
<p>Tidied the code up a bit and got it working in the process (as far as I can see - the right end is now fixed). Here it is:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="c"># Size of window</span>
<span class="n">canvas_width</span> <span class="o">=</span> <span class="mi">640</span>
<span class="n">canvas_height</span> <span class="o">=</span> <span class="mi">480</span>

<span class="c"># Define colours</span>
<span class="n">color</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">background_color</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="c"># Set the window title</span>
<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">"Standing wave demonstration"</span><span class="p">)</span>

<span class="c"># Make a screen to see</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span>

<span class="c"># Make a surface to draw on</span>
<span class="n">surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span>

<span class="c"># Define standing wave function</span>

<span class="n">amplitude</span> <span class="o">=</span> <span class="mi">50</span> <span class="c"># in px</span>
<span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">canvas_width</span>

<span class="k">def</span> <span class="nf">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">frequency</span><span class="o">*</span><span class="p">(</span><span class="n">speed</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>

<span class="k">def</span> <span class="nf">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sum</span>

<span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span><span class="o">*</span><span class="n">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">psi</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">canvas_width</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">frequency</span><span class="o">*</span><span class="p">(</span><span class="n">speed</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>

<span class="c"># Main loop</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># Redraw background</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span>

<span class="k">for</span> <span class="nb">xrange</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">canvas_width</span><span class="p">):</span>
    <span class="n">yrange</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">canvas_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">psi</span><span class="p">(</span><span class="nb">xrange</span><span class="p">,</span> <span class="mi">23</span><span class="p">))</span>
    <span class="n">surface</span><span class="o">.</span><span class="n">set_at</span><span class="p">((</span><span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span><span class="p">),</span> <span class="n">color</span><span class="p">)</span>

<span class="c"># Add surface to screen</span>
<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">surface</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c"># Display</span>
<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">fliphttp</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">pygame</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">ref</span><span class="o">/</span><span class="n">draw</span><span class="o">.</span><span class="n">html</span><span class="p">()</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">quit</span> <span class="p">()</span></code></pre></figure>

<p><a id="24Aug"></a></p>
<h2>Sunday 24th August</h2>
<p>Now the maths was sorted, I wanted to make the animation look prettier. This involved changing the colours (easy) and the thickness of the curve (not quite so easy, as the very simple code I followed worked by changing the colour of single pixels). Time to use the draw function, following this <a href="http://www.pygame.org/docs/ref/draw.html">Pygame drawing tutorial</a> to rewrite code.</p>
<p>First I made a simple sine curve (<code>drawsin.py</code>):</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c"># Draw sine curve with pygame</span>

<span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="c"># Window size</span>
<span class="n">canvas_width</span> <span class="o">=</span> <span class="mi">640</span>
<span class="n">canvas_height</span> <span class="o">=</span> <span class="mi">480</span>

<span class="c"># Define colours</span>
<span class="n">line_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">212</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">background_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c"># Make screen</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Sine curve properties:</span>
<span class="n">amplitude</span> <span class="o">=</span> <span class="mi">80</span>

<span class="n">xpoints</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">canvas_width</span><span class="p">)]</span>
<span class="n">ypoints</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xpoints</span><span class="p">:</span>
    <span class="n">ypoints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">canvas_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">canvas_width</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)))</span>

<span class="n">coords</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">canvas_width</span><span class="p">):</span>
    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">xpoints</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ypoints</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>

<span class="k">print</span> <span class="n">ypoints</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>

<span class="c"># Main loop</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># Draw sine curve</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span> <span class="n">line_colour</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span></code></pre></figure>
 
Then I added this to my file (`standing_wave_2.py`):

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">## Standing wave demonstration with pygame</span>

<span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="c"># Window size</span>
<span class="n">canvas_width</span> <span class="o">=</span> <span class="mi">640</span>
<span class="n">canvas_height</span> <span class="o">=</span> <span class="mi">480</span>

<span class="c"># Define colours</span>
<span class="n">line_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">212</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">background_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c"># Make screen</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Make drawing surface</span>
<span class="n">surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Define standing wave function</span>

<span class="n">amplitude</span> <span class="o">=</span> <span class="mi">50</span> <span class="c"># in px</span>
<span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">canvas_width</span>

<span class="k">def</span> <span class="nf">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">frequency</span><span class="o">*</span><span class="p">(</span><span class="n">speed</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>

<span class="k">def</span> <span class="nf">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sum</span>

<span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span><span class="o">*</span><span class="n">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">psi</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">canvas_width</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">frequency</span><span class="o">*</span><span class="p">(</span><span class="n">speed</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>

<span class="c"># Main loop</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
             <span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># Redraw background</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="n">xpoints</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">canvas_width</span><span class="p">)]</span>
<span class="n">ypoints</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xpoints</span><span class="p">:</span>
    <span class="n">ypoints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">canvas_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">psi</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">32</span><span class="p">)))</span>

<span class="n">coords</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xpoints</span><span class="p">)):</span>
    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">xpoints</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ypoints</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>

<span class="c"># Draw curve</span>
<span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="n">surface</span><span class="p">,</span> <span class="n">line_colour</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="c"># Add surface to screen</span>
<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">surface</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span></code></pre></figure>

<p>It works fine, but it's kind of slow... after a bit of searching around I decided to go back to the pixel-updating method of the example I followed. Here's the code (<code>standing_wave_4.py</code>):</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">## Standing wave demonstration with pygame</span>

<span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="c"># Window size</span>
<span class="n">canvas_width</span> <span class="o">=</span> <span class="mi">640</span>
<span class="n">canvas_height</span> <span class="o">=</span> <span class="mi">480</span>

<span class="c"># Define colours</span>
<span class="n">line_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">212</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">background_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c"># Make screen</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Make drawing surface</span>
<span class="n">surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Define standing wave function</span>

<span class="n">amplitude</span> <span class="o">=</span> <span class="mi">50</span> <span class="c"># in px</span>
<span class="n">frequency</span> <span class="o">=</span> <span class="mi">45</span>

<span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">canvas_width</span>

<span class="k">def</span> <span class="nf">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sum</span>

<span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span><span class="o">*</span><span class="n">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">psi</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">canvas_width</span><span class="p">))</span>

<span class="c">#pygame.init()</span>

<span class="c"># Main loop</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># Redraw background</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="k">for</span> <span class="nb">xrange</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">canvas_width</span><span class="p">):</span>
    <span class="n">yrange</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">canvas_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">psi</span><span class="p">(</span><span class="nb">xrange</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">frequency</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
        <span class="n">surface</span><span class="o">.</span><span class="n">set_at</span><span class="p">((</span><span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span> <span class="o">+</span> <span class="n">i</span><span class="p">),</span> <span class="n">line_colour</span><span class="p">)</span>

<span class="c"># Add surface to screen</span>
<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">surface</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c"># Display</span>
<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span></code></pre></figure>

<p>It worked OK, so my next plan was to add some interactivity.</p>

<p><a id="26Aug"></a></p>
<h2>Tuesday 26th August</h2>
<p>I added some very crude interactivity, using left and right arrows to control frequency (using <a href="http://stackoverflow.com/questions/16044229/how-to-get-keyboard-input-in-pygame">this example</a> as a guide), plus some text at the top of the screen displaying the current frequency (based on <a href="http://www.pygame.org/docs/tut/tom/games2.html">this example</a>).</p>
<p>The full code is (<code>standing_wave_5.py</code>):</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">I</span> <span class="n">added</span> <span class="n">some</span> <span class="n">very</span> <span class="n">crude</span> <span class="n">interactivity</span><span class="p">,</span> <span class="n">using</span> <span class="n">left</span> <span class="ow">and</span> <span class="n">right</span> <span class="n">arrows</span> <span class="n">to</span> <span class="n">control</span> <span class="n">frequency</span> <span class="p">(</span><span class="n">using</span> <span class="p">[</span><span class="n">this</span> <span class="n">example</span><span class="p">][</span><span class="n">keys</span><span class="p">]</span> <span class="k">as</span> <span class="n">a</span> <span class="n">guide</span><span class="p">),</span> <span class="n">plus</span> <span class="n">some</span> <span class="n">text</span> <span class="n">at</span> <span class="n">the</span> <span class="n">top</span> <span class="n">of</span> <span class="n">the</span> <span class="n">screen</span> <span class="n">displaying</span> <span class="n">the</span> <span class="n">current</span> <span class="n">frequency</span> <span class="p">(</span><span class="n">based</span> <span class="n">on</span> <span class="p">[</span><span class="n">this</span> <span class="n">example</span><span class="p">][</span><span class="n">text</span><span class="p">])</span><span class="o">.</span>

<span class="p">[</span><span class="n">keys</span><span class="p">]:</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">stackoverflow</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">questions</span><span class="o">/</span><span class="mi">16044229</span><span class="o">/</span><span class="n">how</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">get</span><span class="o">-</span><span class="n">keyboard</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">pygame</span>
<span class="p">[</span><span class="n">text</span><span class="p">]:</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">pygame</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">tut</span><span class="o">/</span><span class="n">tom</span><span class="o">/</span><span class="n">games2</span><span class="o">.</span><span class="n">html</span>

<span class="n">The</span> <span class="n">full</span> <span class="n">code</span> <span class="ow">is</span> <span class="p">(</span><span class="sb">`standing_wave_5.py`</span><span class="p">):</span>

<span class="sb">``</span><span class="err">`</span><span class="n">python</span>

<span class="c">## Standing wave demonstration with pygame</span>

<span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="c"># Window size</span>
<span class="n">canvas_width</span> <span class="o">=</span> <span class="mi">640</span>
<span class="n">canvas_height</span> <span class="o">=</span> <span class="mi">480</span>

<span class="c"># Define colours</span>
<span class="n">line_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">212</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">background_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">slider_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c"># Make screen</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Make drawing surface</span>
<span class="n">surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Define standing wave function</span>

<span class="n">amplitude</span> <span class="o">=</span> <span class="mi">80</span> <span class="c"># in px</span>
<span class="n">frequency</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">speed</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">canvas_width</span>

<span class="k">def</span> <span class="nf">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="k">return</span> <span class="p">(</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">frequency</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="k">return</span> <span class="nb">sum</span>

<span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="k">return</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span><span class="o">*</span><span class="n">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">psi</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="k">return</span> <span class="n">y</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">canvas_width</span><span class="p">))</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

<span class="c"># Main loop</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
<span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># Redraw background</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="k">for</span> <span class="nb">xrange</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">canvas_width</span><span class="p">):</span>
<span class="n">yrange</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">canvas_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">psi</span><span class="p">(</span><span class="nb">xrange</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">speed</span><span class="o">*</span><span class="n">frequency</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
<span class="n">surface</span><span class="o">.</span><span class="n">set_at</span><span class="p">((</span><span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span> <span class="o">+</span> <span class="n">i</span><span class="p">),</span> <span class="n">line_colour</span><span class="p">)</span>

<span class="c"># Display some text</span>
<span class="n">font</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="mi">36</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">"Frequency is "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">frequency</span><span class="p">)),</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">textpos</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>
<span class="n">textpos</span><span class="o">.</span><span class="n">centerx</span> <span class="o">=</span> <span class="n">surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span><span class="o">.</span><span class="n">centerx</span>
<span class="n">surface</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">textpos</span><span class="p">)</span>

<span class="c"># Add surface to screen</span>
<span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">surface</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c"># Display</span>
<span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="n">move_ticker</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">keys</span><span class="o">=</span><span class="n">pygame</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">get_pressed</span><span class="p">()</span>
<span class="k">if</span> <span class="n">keys</span><span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_LEFT</span><span class="p">]:</span>
<span class="k">if</span> <span class="n">move_ticker</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="n">move_ticker</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">frequency</span> <span class="o">-=</span> <span class="mf">0.1</span>
<span class="k">if</span> <span class="n">keys</span><span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_RIGHT</span><span class="p">]:</span>
<span class="k">if</span> <span class="n">move_ticker</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="n">move_ticker</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">frequency</span> <span class="o">+=</span> <span class="mf">0.1</span>

<span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span></code></pre></figure>

<p>Took a screenshot (<code>screenshot1</code>)<br />
This could do with some improvements:</p>
<ul>
<li>It would be worth making it easier to change the frequency a large amount... maybe with an editable text box</li>
<li>At the moment when I change the frequency the curve is 'resetting' somehow so that the movement is not smooth. Definitely need to fix this one!</li>
</ul>
<p><a id="28Aug"></a></p>
<h2>Thursday 28 August</h2>
<p>Got out a pen and paper and actually started working through the maths. Will write this up some other time when it's finished.</p>
<p><a id="1Sep"></a></p>
<h2>Monday 1 September</h2>
<p>Wrote up some of this post and started thinking about how to change the frequency... a slider might be good. I played for a bit with a GUI library for Pygame, <a href="http://www.pygame.org/project-PGU+-+Phil's+pyGame+Utilities-108-.html">PGU</a>.</p>
<p><a id="2Sep"></a></p>
<h2>Tuesday 2 September</h2>
<p>Bit more playing with the GUI library, went home early as getting a cold. Not really sure this is the way I want to go - I think I will keep it simple for now and consider interactive options if I decide to implement this in d3.js instead of Python.</p>
<p><a id="7Sep"></a></p>
<h2>Sunday 7th September</h2>
<p>Oh shit! I realised the code was wrong -- the curve wasn't changing shape with increasing frequency. I didn't remember it always being wrong -- had I broken it? I found one problem: <code>ysummand</code> was not summing correctly. I fixed that, but it was still wrong.</p>
<p>I decided to reproduce \( \psi \) as a simple animation in Mathematica, a program where I actually know what I'm doing. I soon convinced myself the solution was correct -- just not my implementation!</p>
<p><a id="8Sep"></a></p>
<h2>Monday 8th September</h2>
<p>I found the problem after testing various things -- it's something to do with integers and floats. Currently if the frequency increment is a float it breaks, if it is an integer it doesn't. I must have had everything as integers to start with, which is why I didn't spot the problem. I can also break it by defining the amplitude and speed as floats. Need to go through carefully and work out what needs to be what... tomorrow!</p>
<p><a id="9Sep"></a></p>
<h2>Tuesday 9th September</h2>
<p>GAH I STILL CAN'T FIX IT. :(</p>
<p><a id="15Sep"></a></p>
<h2>Monday 15th September</h2>
<p>I'm more confused than before. I fixed one small problem and the code is now consistent whether I use floats or integers (i.e. values of \( psi\) are the same whether the frequency is 3 or 3.0). But it still doesn't work, and moreover, \( psi\) barely changes with frequency.</p>
<p>I think the best option will be to play with the Mathematica animation for a bit with different parameter ranges.</p>
<p><a id="17Sep"></a></p>
<h2>Wednesday 17th September</h2>
<p>Quick play around in Mathematica. Realised that the code is working but nothing much is really happening for the parameter range I chose -- the interesting stuff is going on at much lower frequencies!</p>
<p>This actually makes sense. The equation for \( psi\) is going to produce sensible results if parameters like the length of the string around unity, but I have a canvas length of 640 pixels. So it was never going to be a great success!</p>
<p><a id="18Sep"></a></p>
<h2>Thursday 18th September</h2>
<p>Picked some parameters that make the interactivity nice --  the waves on the string change at a sensible rate as you adjust the frequency, not too rapidly or too irritatingly slowly.</p>
<p>The frequencies are currently annoyingly small numbers -- sure I can scale things better when my brain is working. But anyway, here is the current version:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">## Standing wave demonstration with pygame</span>

<span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="c"># Window size</span>
<span class="n">canvas_width</span> <span class="o">=</span> <span class="mi">640</span>
<span class="n">canvas_height</span> <span class="o">=</span> <span class="mi">480</span>

<span class="c"># Define colours</span>
<span class="n">line_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">212</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">background_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">slider_colour</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>


<span class="c"># Make screen</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span>
<span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Make drawing surface</span>
<span class="n">surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">canvas_width</span><span class="p">,</span> <span class="n">canvas_height</span><span class="p">))</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
<span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

<span class="c"># Define standing wave function</span>

<span class="n">amplitude</span> <span class="o">=</span> <span class="mi">3</span> <span class="c"># in px</span>
<span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">canvas_width</span>

<span class="k">def</span> <span class="nf">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
	<span class="k">return</span> <span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">frequency</span><span class="p">)</span><span class="o">/</span><span class="n">speed</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">frequency</span><span class="p">)</span><span class="o">/</span><span class="n">speed</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">k</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Nmax</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
	<span class="n">sumList</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Nmax</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Nmax</span><span class="p">):</span>
		<span class="n">sumList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ysummand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>

	<span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">sumList</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
	<span class="k">return</span> <span class="p">(</span><span class="mi">2</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">amplitude</span><span class="o">*</span><span class="n">ysum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">psi</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">y</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">canvas_width</span><span class="p">)))</span>




<span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

<span class="c"># Main loop</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">freq</span> <span class="o">=</span> <span class="mf">0.01</span> <span class="c"># set initial frequency</span>

<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

	<span class="c"># Redraw background</span>
    <span class="n">surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">background_colour</span><span class="p">)</span>

    <span class="k">for</span> <span class="nb">xrange</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">canvas_width</span><span class="p">):</span>
	<span class="n">yrange</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">canvas_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">psi</span><span class="p">(</span><span class="nb">xrange</span><span class="p">,</span> <span class="n">freq</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="n">speed</span><span class="o">*</span><span class="n">freq</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
		<span class="n">surface</span><span class="o">.</span><span class="n">set_at</span><span class="p">((</span><span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span> <span class="o">+</span> <span class="n">i</span><span class="p">),</span> <span class="n">line_colour</span><span class="p">)</span>

    <span class="c"># Display some text</span>
    <span class="n">font</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="mi">36</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">"Frequency is "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">freq</span><span class="p">)),</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">textpos</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>
    <span class="n">textpos</span><span class="o">.</span><span class="n">centerx</span> <span class="o">=</span> <span class="n">surface</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span><span class="o">.</span><span class="n">centerx</span>
    <span class="n">surface</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">textpos</span><span class="p">)</span>

    <span class="n">move_ticker</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">keys</span><span class="o">=</span><span class="n">pygame</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">get_pressed</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">keys</span><span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_LEFT</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">move_ticker</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">move_ticker</span> <span class="o">=</span> <span class="mi">20</span>
            <span class="n">freq</span> <span class="o">-=</span> <span class="mf">0.0001</span>
    <span class="k">if</span> <span class="n">keys</span><span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_RIGHT</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">move_ticker</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>   
            <span class="n">move_ticker</span> <span class="o">=</span> <span class="mi">20</span>     
            <span class="n">freq</span> <span class="o">+=</span> <span class="mf">0.0001</span>




    <span class="c"># Add surface to screen</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">surface</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

    <span class="c"># Display </span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
	
<span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span></code></pre></figure>

<p>Things I could/should still do include:</p>
<ul>
<li>Adding a slider... or just moving straight to d3.js and trying to produce an interactive web page version</li>
<li>Scaling the equations nicely</li>
<li>(related) Working through the maths and understanding it properly.</li>
</ul>
<p>But right now it's time to give this a rest for a week or two and switch focus. I have exciting paper corrections to make!</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Stuff Wot I Dun</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Stuff Wot I Dun</li>
          <li><a href="mailto:wotidunread[at]gmail[dot]com">wotidunread[at]gmail[dot]com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">I dun this
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
